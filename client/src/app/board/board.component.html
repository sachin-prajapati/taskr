<style>
    @import url('https://fonts.googleapis.com/css?family=Montserrat|Poppins|Raleway|Roboto&display=swap');
</style>
<!-- loader -->
<div *ngIf=load class="background">
    <div class="loader">
        <div class="loader-circle">
            <div class="loader-circle">
                <div class="loader-circle">
                    <div class="loader-circle">
                        <div class="loader-circle"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- loader -->
<!-- Update -->
<div class="container-fluid all">
    <div class="row">
        <div class="col-lg-2 update-coloumn">
            <div class="update">
                <div *ngIf=!update>
                    <form (ngSubmit)="updatedetailsboard(f)" #f="ngForm">
                        <div class="form-group">
                            <label for="bName">Board Name</label>
                            <input 
                            placeholder = "Enter Board Name"
                            type="text"
                            id="bName" 
                            name="bName"
                            ngModel
                            class="form-control" 
                            required
                            #bName="ngModel">
                            <span
                            class="help-block"
                            *ngIf="!bName.valid && bName.touched"
                            style="color:red;">Board Name cannot be empty</span>
                            <label for="listname">Description</label>
                            <textarea
                            placeholder = "Enter Description Here"
                            rows="5"
                            id="description" 
                            name="description"
                            ngModel
                            class="form-control"></textarea>
                        </div>
                        <div>
                            <button type="submit" class="btn btn-success update-card-button" [disabled]="!f.valid">Update Board</button>
                        </div>
                    </form>
                    <!-- Bookmark -->
                        <div *ngIf=!bookmark>
                            <button class="bookmark" (click)="addbookmark()">
                                <img src="assets/images/bookmark.png" alt="bookmark">
                            </button>
                        </div>
                        <div *ngIf=bookmark>
                            <button class="bookmark" (click)="deletebookmark()">
                                <img src="assets/images/bookmarkadded.png" alt="bookmarkadded">
                            </button>
                        </div>
                        <!-- Bookmark -->
                        <div>
                            <button (click)="showActivity()" class="btn btn-success update-card-button">Board Activity</button>
                        </div>
                </div>
                <h6>Board Members</h6>
                <div *ngFor="let memberName of boardMembers, index as id">
                    <div class="member-box">{{memberName}}</div>
                </div>
                <form (ngSubmit)="addmember(fmember)" #fmember="ngForm">
                    <div class="form-group">
                        <input 
                        placeholder = "Username"
                        type="text"
                        id="name"
                        name="name"
                        ngModel
                        class="form-control"
                        required 
                        #name="ngModel">
                    </div>
                    <button type="submit" class="btn btn-success update-card-button" [disabled]="!fmember.valid">Add Member</button>
                </form>
            </div>
        </div>
        <!-- Update -->
        <!-- Lists -->
        <div class="col-lg-10">
            <div class="row">
            <div style="margin-bottom:1rem;" *ngFor="let lists of lists, index as id">
                <div class="list-group-item box">
                    <div class="pull-left">
                        <h4
                        class="list-group-item-heading listname">
                            {{lists.name}}
                        </h4>
                    </div>
                    <div *ngFor="let cards of lists.cards, index as id">
                        <div *ngIf="cards.priority === 'High'">
                            <div class="list-group-item list-card" 
                            (click)=expandcard(lists.id,cards.id,cards.name,cards.description,cards.priority,cards.dueDate,cards.dueTime,cards.reminderBefore)
                            style="background-color:#FE2D2D;">
                                <div class="list-group-item-heading text-center">
                                    {{cards.name}}
                                </div>
                                <div *ngIf="cards.dueDateShow">
                                    <button class="due-button">{{cards.dueDateShow}}</button>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="cards.priority === 'Medium'">
                            <div class="list-group-item list-card" 
                            (click)=expandcard(lists.id,cards.id,cards.name,cards.description,cards.priority,cards.dueDate,cards.dueTime,cards.reminderBefore)
                            style="background-color:#F3FF33;">
                                <div class="list-group-item-heading text-center">
                                    {{cards.name}}
                                </div>
                                <div *ngIf="cards.dueDateShow">
                                    <button class="due-button">{{cards.dueDateShow}}</button>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="cards.priority === 'Low'">
                            <div class="list-group-item list-card" 
                            (click)=expandcard(lists.id,cards.id,cards.name,cards.description,cards.priority,cards.dueDate,cards.dueTime,cards.reminderBefore)
                            style="background-color:#33FF38;">
                                <div class="list-group-item-heading text-center">
                                    {{cards.name}}
                                </div>
                                <div *ngIf="cards.dueDateShow">
                                    <button class="due-button">{{cards.dueDateShow}}</button>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="cards.priority === null">
                            <div class="list-group-item list-card" (click)=expandcard(lists.id,cards.id,cards.name,cards.description,cards.priority,cards.dueDate,cards.dueTime,cards.reminderBefore)>
                                <div class="list-group-item-heading text-center">
                                    {{cards.name}}
                                </div>
                                <div *ngIf="cards.dueDateShow">
                                    <button class="due-button">{{cards.dueDateShow}}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button (click)=showinputcard(lists.id) class="mx-auto add-card">Add Card</button>
                </div>
            </div>
            <div class="list-group-item boxadd">
            <div *ngIf=!wantaddlist class="addlist">
                <button (click)=showinput() class="btn btn-primary add-list">Add Another List</button>
            </div>
            <div *ngIf=wantaddlist>
                <form (ngSubmit)="addlist(f)" #f="ngForm">
                    <div class="form-group">
                        <input 
                        placeholder = "Enter List Name"
                        type="text"
                        id="name" 
                        name="name"
                        ngModel
                        class="form-control" 
                        required
                        #name="ngModel">
                        <span 
                        class="help-block"
                        *ngIf="!name.valid && name.touched"
                        style="color:red;">Enter a valid List Name</span>
                    </div>
                    <button type="submit" class="btn btn-success mybutton" [disabled]="!f.valid">Add List</button>
                    <button (click)="hideinput()" class="btn btn-danger mybutton"><span class="glyphicon glyphicon-remove"></span> Remove</button>
                </form>
            </div>
        </div>
        </div>
    </div>
    </div>
</div>
<!-- Add Card -->
<div *ngIf=wantaddcard class="add-card-background">
    <div class="contain-add-card">
        <form (ngSubmit)="addcard(f)" #f="ngForm" class="addcard">
            <div class="form-group">
                <input 
                placeholder = "Enter Card Name"
                type="text"
                id="cname"
                name="cname"
                ngModel
                class="form-control cardname" 
                required
                #cname="ngModel">
                <span 
                class="help-block"
                *ngIf="!cname.valid && cname.touched"
                style="color:red;">Enter a valid Card Name</span>
            </div>
            <button type="submit" class="mybutton" [disabled]="!f.valid">Add Card</button>
            <button (click)="hidecardinput()" class="mybuttoncancel">Cancel</button>
        </form> 
    </div>
</div>
<!-- Add Card -->
<!-- Update Card Form -->
<div *ngIf=updatecards class="add-card-background">
    <div class="contain-update-card">
        <form (ngSubmit)="updatecard(fcard)" #fcard="ngForm" class="addcard">
            <div class="form-group">
                <input 
                placeholder = "Enter Card Name"
                type="text"
                id="cname"
                name="cname"
                ngModel
                class="form-control input-field"
                required
                #cname="ngModel">
                <span 
                class="help-block"
                *ngIf="!cname.valid && cname.touched"
                style="color:red;">Enter a valid Card Name</span>
                <label for="listname">Description</label>
                <textarea
                placeholder = "Enter Description Here"
                rows="5"
                id="description"
                name="description"
                ngModel
                class="form-control input-field"></textarea>
                <label for="priority">Task Priority</label>
                <input 
                type="radio"
                name="priority"
                value="High"
                ngModel> High
                <input 
                type="radio"
                name="priority"
                value="Medium"
                ngModel> Medium
                <input 
                type="radio"
                name="priority"
                value="Low"
                ngModel> Low
            </div>
            <button type="submit" class="btn btn-success" [disabled]="!fcard.valid">Update Details</button>
            <button (click)="deletecard()" class="btn btn-danger">
                Delete Card
            </button>
        </form>
        <form (ngSubmit)="cardduedate(fcardduedate)" #fcardduedate="ngForm" class="setduedate">
            <label for="duedate">Set Due Date</label>   
            <div class="form-group">
                <input 
                placeholder = "Enter Card Name"
                type="date"
                id="dueDate"
                name="dueDate"
                ngModel
                class="form-control input-field"
                required
                #duedate="ngModel">
                <input 
                placeholder = "Remind Before"
                type="time"
                id="dueTime"
                name="dueTime"
                ngModel
                class="form-control input-field"
                required
                #remindbefore="ngModel">
                <label for="priority">Remind before</label>
                <input 
                type="radio"
                name="reminderBefore"
                value=15
                ngModel> 15 min
                <input 
                type="radio"
                name="reminderBefore"
                value=30
                ngModel> 30 min
                <input 
                type="radio"
                name="reminderBefore"
                value=60
                ngModel> 1 Hour
            </div>
            <button type="submit" class="btn btn-primary" [disabled]="!fcardduedate.valid">Set Due Date</button>
        </form>
        <button class="update-card-button" (click)=closecard()>Close</button>
    </div>
</div>
<!-- Update Card Form -->
<!-- Activity -->
<div *ngIf=showactivity class="add-card-background">
    <div class="contain-notification-board">
        <h3 class="text-center text-uppercase" style="color:#173E43;">Activity</h3>
        <div *ngFor="let activity of activity, index as id">
           <p>
               <div><b>{{ activity.activity }}</b></div>
                <div class="time">{{ activity.activityTime }}</div>
        </div>
        <button (click)="hideactivity()" class="update-card-button">Close</button>
    </div>
</div>
<!-- Activity -->

<!-- error -->
<div *ngIf=error class="popup-background">
    <div class="contain-popup">
        <div class="row">
            <div class="col-md-5">
                <!-- <img src="assets/images/error.png" class="img-fluid" alt="error"> -->
            </div>
            <div class="col-md-7">
                <h3 class="text-center err-heading">Oops!!</h3>
                <p class="errormsg">{{errorMsg}}</p>
                <button class="ok" (click)=ok()>OK</button>
            </div>
        </div>
    </div>
</div>
<!-- error -->
<!-- success -->
<div *ngIf=success class="popup-background">
    <div class="contain-popup-success">
        <div class="row">
            <div class="col-md-5">
                <button class="ok-success" (click)=ok()>OK</button>
            </div>
        </div>
    </div>
</div>
<!-- success -->